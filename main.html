<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>פילטר צבעי עיניים (מסומן) – blink gating</title>

  <!-- Maybe add camera_utils ?   <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js" crossorigin="anonymous"></script> -->
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/face_mesh.js"></script>

<link rel="stylesheet" href="main.css">
</head>
<body>
<div id="eye-filter-widget" style="max-width: 640px; margin: 16px auto; padding: 0 8px; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;">

  <div class="efw-card">
    <div class="efw-row">
      <div style="width:100%">
        <div class="efw-video-wrap">
           <!-- Static logo fixed at the top of the camera window -->
           <div class="efw-logo">Kerato.Life️👁</div>
          
           <!-- Camera launch button in the center -->
          <button id="efw-start-center" type="button">הפעל מצלמה</button>

          <!-- Popup: 16 colors + intensity slider -->
          <div class="efw-palette" id="efw-palette" role="dialog" aria-hidden="true">
            <div class="efw-inline" style="margin-bottom:8px">
              <input id="efw-color" class="efw-color-input" type="hidden" value="#b7a49d" aria-label="בחר צבע" />
              <div class="efw-inline">
                <div class="efw-chip active" data-color="#C8A89E" title="Dune" style="background:#C8A89E"></div>
                <div class="efw-chip" data-color="#8C5B3B" title="Sand ER19D" style="background:#8C5B3B"></div>
                <div class="efw-chip" data-color="#B8912E" title="Honey Gold" style="background:#B8912E"></div>
                <div class="efw-chip" data-color="#A27B34" title="Sahara" style="background:#A27B34"></div>
                <div class="efw-chip" data-color="#9B7B42" title="Tropical" style="background:#9B7B42"></div>
                <div class="efw-chip" data-color="#9CB08C" title="Savana" style="background:#9CB08C"></div>
                <div class="efw-chip" data-color="#6C8B5C" title="Pistache CT88" style="background:#6C8B5C"></div>
                <div class="efw-chip" data-color="#A6CBB7" title="Jade" style="background:#A6CBB7"></div>
                <div class="efw-chip" data-color="#C5DAD0" title="Arctique" style="background:#C5DAD0"></div>
                <div class="efw-chip" data-color="#95B7C7" title="Green Water" style="background:#95B7C7"></div>
                <div class="efw-chip" data-color="#6AA6C9" title="Turquoise" style="background:#6AA6C9"></div>
                <div class="efw-chip" data-color="#5C82C4" title="New Blue" style="background:#5C82C4"></div>
                <div class="efw-chip" data-color="#4B5C91" title="Pacific" style="background:#4B5C91"></div>
                <div class="efw-chip" data-color="#8DB5E0" title="Azur" style="background:#8DB5E0"></div>
                <div class="efw-chip" data-color="#D4D9E8" title="Polar Grey" style="background:#D4D9E8"></div>
                <div class="efw-chip" data-color="#AFAFB9" title="Pearl" style="background:#AFAFB9"></div>
              </div>
                <!-- <div class="efw-inline">
                <div class="efw-chip active" data-color="#b7a49d" title="Dune" style="background:#b7a49d"></div>
                <div class="efw-chip" data-color="#79655a" title="Sand ER19D" style="background:#79655a"></div>
                <div class="efw-chip" data-color="#947d51" title="Honey Gold" style="background:#947d51"></div>
                <div class="efw-chip" data-color="#947d51" title="Sahara" style="background:#947d51"></div>
                <div class="efw-chip" data-color="#998a69" title="Tropical" style="background:#998a69"></div>
                <div class="efw-chip" data-color="#8e9988" title="Savana" style="background:#8e9988"></div>
                <div class="efw-chip" data-color="#657960" title="Pistache CT88" style="background:#657960"></div>
                <div class="efw-chip" data-color="#abc0ad" title="Jade" style="background:#abc0ad"></div>
                <div class="efw-chip" data-color="#d5e4df" title="Arctique" style="background:#d5e4df"></div>
                <div class="efw-chip" data-color="#a1bccf" title="Green Water" style="background:#a1bccf"></div>
                <div class="efw-chip" data-color="#9bacbe" title="Turquoise" style="background:#9bacbe"></div>
                <div class="efw-chip" data-color="#8298c7" title="New Blue" style="background:#8298c7"></div>
                <div class="efw-chip" data-color="#7785a8" title="Pacific" style="background:#7785a8"></div>
                <div class="efw-chip" data-color="#c4d5ff" title="Azur" style="background:#c4d5ff"></div>
                <div class="efw-chip" data-color="#e6ebff" title="Polar Grey" style="background:#e6ebff"></div>
                <div class="efw-chip" data-color="#aeb2bd" title="Pearl" style="background:#aeb2bd"></div>
              </div> -->
            </div>

            <div class="efw-brightness-control" >
             
              <label class="efw-label">עוצמת הצבע:</label>
              <!-- @ to change the intensity of the color filter to 45% or 55% change the max -->
              <input id="efw-alpha" class="efw-slider" type="hidden" min="10" max="55" value="55"  />
                 <select class="efw-intensity-btn" >
                    <!-- <option class="efw-intensity-btn" value="">--תבחר את בהירות הצבע--</option> -->
                    <option class="efw-intensity-btn" value="33">נמוך</option>
                    <option class="efw-intensity-btn" value="45" selected>ממוצע</option>
                    <option class="efw-intensity-btn" value="55">גבוה</option>
                 </select>
            </div>

          </div>

          <canvas id="efw-canvas"></canvas>
          <video id="efw-video" playsinline autoplay muted></video>

          <!-- Floating round button to open/close the panel -->
          <button id="efw-fab" type="button" title="בחירת צבע" aria-controls="efw-palette" aria-expanded="false">🎨</button>
        
          <!-- Brightness boost button -->
          <button id="efw-bright-boost" type="button" title="יש סיכוי שלאחר הניתוח תהיה בהירות מוגברת" aria-label="הגברת בהירות">🔅</button>

          <!--  Start updated UI  -->

          <!-- Button to capture pictures -->
          <button id="efw-capture" type="button" title="צילום" aria-label="צילום">📸</button>
          <div id="efw-color-tag" class="efw-color-tag" aria-live="polite"></div>
        
          <!--  End updated UI  -->
      
        </div>
        <div id="efw-status" class="efw-status efw-small">לחץ על "הפעל מצלמה" להתחלה</div>
        <button id="efw-stop" class="efw-btn sec" disabled style="margin-top:16px;padding:14px 32px">עצור מצלמה</button>
      </div>
    </div>
  </div>

  <script src="main.js">

    

  </script>
</div>
</body>
</html>
